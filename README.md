# 수질 예측 회귀 모델 비교 (ElasticNet vs Random Forest)

 이 프로젝트는 실제 수질 데이터를 활용하여 **pH 수치 예측**을 위한 회귀 모델을 구축하고,  
**ElasticNet 회귀**와 **Random Forest 회귀**의 성능을 비교하며, 
과적합 문제와 특성 기여도 부분을 해석하는 머신러닝 실험입니다.

---

## 🔍 프로젝트 개요

- **데이터**: `water_quality.csv` (수온, 용존산소, 총질소, 총인, TOC, 페놀, 시안 등 포함)
- **목표**: pH 수치를 연속적으로 예측하는 회귀 모델 학습
- **비교 모델**:
  1. ElasticNet 회귀 (다항 특성 + 정규화)
  2. Random Forest 회귀 (비선형 앙상블)

---

## 🔍 모델별 성능 비교

### ✅ ElasticNet 회귀 (다항 특성 + 표준화)

| 지표       | 학습 데이터 | 테스트 데이터 |
|------------|--------------|----------------|
| MAE        | 0.1242       | 0.1198         |
| RMSE       | 0.1640       | 0.1924         |
| 일반화 성능 | ✅ 우수 (Train/Test 비슷) |

---

### ✅ Random Forest 회귀

| 지표       | 학습 데이터 | 테스트 데이터 |
|------------|--------------|----------------|
| MAE        | 0.0420       | 0.1511         |
| RMSE       | 0.0606       | 0.2800         |
| 일반화 성능 | ⚠️ 과적합 경향 (Train ≪ Test) |

---

## 🧪 결론 요약

- **ElasticNet**은 해석이 가능하고 안정적인 예측 성능을 보였으며,  
- **Random Forest**는 복잡한 패턴을 학습했지만 과적합으로 인해 테스트 오차가 더 높았음  
- Random Forest 모델의 트리 개수, 트리 깊이를 제한하고 리프(Leaf) 노드에 남을 최소 샘플 수를 5개로 지정하여 과적합을 최대한 완화하였으나 여전히 과적합 경향을 나타냄.

ElasticNet 회귀 결과, 수온(temperature)이 pH 농도에 가장 큰 양의 영향을 미쳤으며,
특히 중랑천(station_name_중랑천)에서의 측정값은 기본적으로 pH가 높게 나타나는 경향이 있었다.
또한, 중랑천에서 온도가 높을 경우 pH가 더욱 상승하는 상호작용 효과가 관찰되었고,
총질소(TN)는 음의 방향으로 pH에 영향을 주는 것으로 나타났다.
중랑천에서의 총질소(TN)가 높을 경우 pH는 더욱 낮아지는 미세한 상호작용 효과 또한 관찰되었다.

Random Forest 회귀 결과, pH 농도 예측에 가장 큰 영향을 준 특성은 **수온(temperature)** 으로, 전체 중요도 중 **38.5%** 를 차지하며 매우 높은 기여도를 보였다.
이어서 "중랑천에서 측정된 수온" (temperature × station_name_중랑천) 조합 특성이 **11.7%** 의 중요도로 2위를 기록하며,
중랑천에서 수온이 높을수록 pH가 크게 달라지는 경향이 있다는 점을 시사한다.

세 번째로 중요한 특성은 **총질소(TN)** 로, **9.3%** 의 기여도를 나타냈으며, 이는 수질 오염 지표인 질소가 pH 변화에 중요한 변수임을 나타낸다.
이 외에도, 총질소 × 총유기탄소 (TN × TOC) 조합, 중랑천 × 안양천 같은 측정소 간의 상호작용 변수,
중랑천과 탄천의 조합, 중랑천에서 측정된 DO(용존산소) 등도 높은 중요도를 보이며, 측정소의 위치 및 오염물 간 상호작용이 pH 예측에 영향을 주는 것으로 분석되었다.

또한, 탄천에서의 수온(temperature × station_name_탄천) 역시 의미 있는 변수로 등장했으며,
총인의 제곱(TP^2), 중랑천에서 측정된 총질소(TN × station_name_중랑천) 역시 pH에 영향을 미치는 특성으로 판단된다.

결과적으로, Random Forest 회귀에 규제를 과하게 걸어 과적합을 완화할 필요가 없기 때문에, 성능 부분에서도, 해석 부분에서도 좋은 ElasticNet 선형 회귀를 사용하는 것이 더욱 좋다고 판단했다.
